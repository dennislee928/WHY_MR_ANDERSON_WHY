# Nginx åœ¨ Pandora Box Console çš„è§’è‰²èˆ‡åŠŸèƒ½

**ç‰ˆæœ¬**: v3.4.1  
**é…ç½®**: `configs/nginx/default-paas.conf`

---

## ğŸ¯ æ ¸å¿ƒè§’è‰²

### 1. **çµ±ä¸€å…¥å£é»ï¼ˆAPI Gatewayï¼‰**

Nginx ä½œç‚ºæ•´å€‹ Pandora Box Console ç³»çµ±çš„**å”¯ä¸€å°å¤–å…¥å£**ï¼Œçµ±ä¸€ç®¡ç†æ‰€æœ‰æœå‹™çš„è¨ªå•ã€‚

```
å¤–éƒ¨è«‹æ±‚ â†’ Nginx (Port 80/443) â†’ å…§éƒ¨å¾®æœå‹™
```

---

## ğŸ”§ ä¸»è¦åŠŸèƒ½

### 1. âœ… åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰

**åŠŸèƒ½**: å°‡å¤–éƒ¨è«‹æ±‚è·¯ç”±åˆ°å°æ‡‰çš„å…§éƒ¨æœå‹™

#### é…ç½®çš„ä¸Šæ¸¸æœå‹™ (5 å€‹)

```nginx
upstream axiom_ui {
    server axiom-be:3001;       # API å¾Œç«¯æœå‹™
    keepalive 32;
}

upstream grafana {
    server grafana:3000;        # è¦–è¦ºåŒ–å„€è¡¨æ¿
    keepalive 32;
}

upstream prometheus {
    server prometheus:9090;     # ç›£æ§æŒ‡æ¨™
    keepalive 32;
}

upstream loki {
    server loki:3100;           # æ—¥èªŒèšåˆ
    keepalive 32;
}

upstream alertmanager {
    server alertmanager:9093;   # å‘Šè­¦ç®¡ç†
    keepalive 32;
}
```

---

### 2. âœ… è·¯ç”±ç®¡ç†ï¼ˆURL Routingï¼‰

**åŠŸèƒ½**: æ ¹æ“š URL è·¯å¾‘åˆ†ç™¼åˆ°ä¸åŒæœå‹™

| URL è·¯å¾‘ | è½‰ç™¼ç›®æ¨™ | ç”¨é€” |
|---------|---------|------|
| `/api/` | axiom-be:3001 | RESTful API |
| `/ws` | axiom-be:3001 | WebSocket å³æ™‚é€šè¨Š |
| `/grafana/` | grafana:3000 | Grafana å„€è¡¨æ¿ |
| `/prometheus/` | prometheus:9090 | Prometheus ç›£æ§ |
| `/loki/` | loki:3100 | Loki æ—¥èªŒæŸ¥è©¢ |
| `/alertmanager/` | alertmanager:9093 | AlertManager ç®¡ç† |
| `/health` | å…§å»ºç«¯é» | å¥åº·æª¢æŸ¥ |
| `/` | éœæ…‹æª”æ¡ˆ | å‰ç«¯ UI |

#### ç¯„ä¾‹

```bash
# å¤–éƒ¨è¨ªå•
curl http://localhost/api/v1/health

# Nginx è½‰ç™¼åˆ°
â†’ http://axiom-be:3001/api/v1/health
```

---

### 3. âœ… WebSocket æ”¯æ´

**åŠŸèƒ½**: æ”¯æ´é•·é€£æ¥çš„å³æ™‚é€šè¨Š

```nginx
location /ws {
    proxy_pass http://axiom_ui;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    
    # WebSocket è¶…æ™‚è¨­å®šï¼ˆ7å¤©ï¼‰
    proxy_connect_timeout 7d;
    proxy_send_timeout 7d;
    proxy_read_timeout 7d;
}
```

**ç”¨é€”**:
- å³æ™‚ç›£æ§æ•¸æ“šæ¨é€
- å‘Šè­¦å³æ™‚é€šçŸ¥
- é›™å‘é€šè¨Š

---

### 4. âœ… å®‰å…¨é˜²è­·

#### A. å®‰å…¨æ¨™é ­ï¼ˆSecurity Headersï¼‰

```nginx
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "no-referrer-when-downgrade" always;
```

**é˜²è­·æ•ˆæœ**:
- âœ… **X-Frame-Options**: é˜²æ­¢ Clickjacking æ”»æ“Š
- âœ… **X-Content-Type-Options**: é˜²æ­¢ MIME é¡å‹æ··æ·†
- âœ… **X-XSS-Protection**: é˜²æ­¢è·¨ç«™è…³æœ¬æ”»æ“Š
- âœ… **Referrer-Policy**: æ§åˆ¶ Referer è³‡è¨Šæ´©éœ²

#### B. é€£æ¥è³‡è¨Šè½‰ç™¼

```nginx
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
```

**åŠŸèƒ½**:
- ä¿ç•™çœŸå¯¦å®¢æˆ¶ç«¯ IP
- æ”¯æ´ IP ç™½åå–®/é»‘åå–®
- å¯©è¨ˆæ—¥èªŒè¿½è¹¤

---

### 5. âœ… æ•ˆèƒ½å„ªåŒ–

#### A. Gzip å£“ç¸®

```nginx
gzip  on;
gzip_comp_level 6;
gzip_types text/plain text/css application/json ...
```

**æ•ˆæœ**:
- æ¸›å°‘å‚³è¼¸é‡ 60-80%
- åŠ å¿«é é¢è¼‰å…¥é€Ÿåº¦
- ç¯€çœé »å¯¬æˆæœ¬

#### B. é€£æ¥æ± ï¼ˆKeep-Aliveï¼‰

```nginx
upstream axiom_ui {
    server axiom-be:3001;
    keepalive 32;  # ä¿æŒ 32 å€‹æŒä¹…é€£æ¥
}
```

**æ•ˆæœ**:
- æ¸›å°‘ TCP æ¡æ‰‹æ¬¡æ•¸
- é™ä½å»¶é²
- æå‡ååé‡

#### C. éœæ…‹æª”æ¡ˆå¿«å–

```nginx
location / {
    expires 1h;
    add_header Cache-Control "public, immutable";
}
```

**æ•ˆæœ**:
- ç€è¦½å™¨å¿«å– 1 å°æ™‚
- æ¸›å°‘é‡è¤‡è«‹æ±‚
- åŠ å¿«é é¢è¼‰å…¥

---

### 6. âœ… è² è¼‰å‡è¡¡ï¼ˆé ç•™ï¼‰

**ç•¶å‰**: å–®ä¸€å¾Œç«¯

**æ“´å±•æ€§**: å¯è¼•é¬†æ·»åŠ å¤šå€‹å¾Œç«¯

```nginx
# æœªä¾†å¯æ“´å±•ç‚º
upstream axiom_ui {
    server axiom-be-1:3001 weight=5;
    server axiom-be-2:3001 weight=3;
    server axiom-be-3:3001 backup;
    keepalive 32;
}
```

---

### 7. âœ… è¶…æ™‚ç®¡ç†

**API è«‹æ±‚è¶…æ™‚**:
```nginx
proxy_connect_timeout 60s;
proxy_send_timeout 60s;
proxy_read_timeout 60s;
```

**WebSocket è¶…æ™‚**:
```nginx
proxy_connect_timeout 7d;  # 7 å¤©é•·é€£æ¥
```

**ä¿è­·æ•ˆæœ**:
- é˜²æ­¢æ…¢é€Ÿæ”»æ“Š
- é¿å…è³‡æºè€—ç›¡
- å„ªé›…è™•ç†è¶…æ™‚

---

### 8. âœ… å¥åº·æª¢æŸ¥ç«¯é»

```nginx
location /health {
    access_log off;        # ä¸è¨˜éŒ„å¥åº·æª¢æŸ¥æ—¥èªŒ
    return 200 "OK\n";     # ç›´æ¥è¿”å› 200
    add_header Content-Type text/plain;
}
```

**ç”¨é€”**:
- Docker healthcheck
- è² è¼‰å‡è¡¡å™¨æª¢æŸ¥
- ç›£æ§ç³»çµ±æ¢æ¸¬

---

### 9. âœ… éœæ…‹æª”æ¡ˆæœå‹™

```nginx
location / {
    root /usr/share/nginx/html;
    index index.html;
    try_files $uri $uri/ /index.html;  # SPA è·¯ç”±æ”¯æ´
}
```

**åŠŸèƒ½**:
- æä¾›å‰ç«¯ UI æª”æ¡ˆ
- æ”¯æ´ React/Vue SPA è·¯ç”±
- éœæ…‹è³‡æºå¿«å–

---

### 10. âœ… æ—¥èªŒè¨˜éŒ„

```nginx
access_log  /var/log/nginx/access.log  main;
error_log  /var/log/nginx/error.log warn;
```

**è¨˜éŒ„å…§å®¹**:
- å®¢æˆ¶ç«¯ IP
- è«‹æ±‚æ™‚é–“
- è«‹æ±‚è·¯å¾‘
- HTTP ç‹€æ…‹ç¢¼
- User-Agent
- å›æ‡‰æ™‚é–“

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹åœ–

```
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   å¤–éƒ¨è¨ªå•       â”‚
                           â”‚  (Port 80/443)  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚      Nginx           â”‚
                        â”‚   åå‘ä»£ç† + é–˜é“     â”‚
                        â”‚   (çµ±ä¸€å…¥å£é»)       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                   â”‚                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚  /api/        â”‚   â”‚  /grafana/  â”‚   â”‚  /ws        â”‚
        â”‚  axiom-be     â”‚   â”‚  grafana    â”‚   â”‚  WebSocket  â”‚
        â”‚  :3001        â”‚   â”‚  :3000      â”‚   â”‚  å³æ™‚é€šè¨Š    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Postgresâ”‚   â”‚cyber-ai-    â”‚   â”‚RabbitMQ   â”‚
    â”‚:5432  â”‚   â”‚quantum:8000 â”‚   â”‚:5672      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Nginx åœ¨ Pandora çš„å…·é«”åŠŸèƒ½æ¸…å–®

### âœ… æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ | ç‹€æ…‹ |
|------|------|------|
| **API é–˜é“** | çµ±ä¸€å…¥å£ | âœ… |
| **åå‘ä»£ç†** | 5 å€‹ä¸Šæ¸¸æœå‹™ | âœ… |
| **WebSocket** | é•·é€£æ¥æ”¯æ´ | âœ… |
| **å®‰å…¨æ¨™é ­** | 4 ç¨®é˜²è­· | âœ… |
| **Gzip å£“ç¸®** | 60-80% å£“ç¸®ç‡ | âœ… |
| **å¥åº·æª¢æŸ¥** | /health ç«¯é» | âœ… |
| **éœæ…‹æª”æ¡ˆ** | å‰ç«¯ UI | âœ… |
| **æ—¥èªŒè¨˜éŒ„** | è¨ªå•å’ŒéŒ¯èª¤æ—¥èªŒ | âœ… |
| **IPv4/IPv6** | é›™å”è­°æ”¯æ´ | âœ… |
| **Keep-Alive** | é€£æ¥æ± å„ªåŒ– | âœ… |

---

## ğŸ” å®‰å…¨æ€§å„ªå‹¢

### 1. **å–®ä¸€å…¥å£æ§åˆ¶**
- æ‰€æœ‰å¤–éƒ¨è«‹æ±‚å¿…é ˆç¶“é Nginx
- å…§éƒ¨æœå‹™ä¸ç›´æ¥æš´éœ²
- çµ±ä¸€çš„å®‰å…¨ç­–ç•¥

### 2. **DDoS ç·©è§£**
```nginx
worker_connections  1024;  # é™åˆ¶ä¸¦ç™¼é€£æ¥
proxy_read_timeout 60s;    # è¶…æ™‚ä¿è­·
```

### 3. **éš±è—å¾Œç«¯è³‡è¨Š**
- ä¸æš´éœ²å…§éƒ¨æœå‹™ IP å’Œç«¯å£
- çµ±ä¸€çš„éŒ¯èª¤é é¢
- éš±è—æŠ€è¡“æ£§ç´°ç¯€

---

## ğŸš€ æ•ˆèƒ½å„ªå‹¢

### 1. **é€£æ¥å¾©ç”¨**
- Keep-Alive: 32 å€‹æŒä¹…é€£æ¥
- æ¸›å°‘ TCP æ¡æ‰‹é–‹éŠ·

### 2. **å£“ç¸®å‚³è¼¸**
- Gzip å£“ç¸®: ç¯€çœ 60-80% é »å¯¬
- åŠ å¿«è¼‰å…¥é€Ÿåº¦

### 3. **éœæ…‹å¿«å–**
- ç€è¦½å™¨å¿«å–: 1 å°æ™‚
- æ¸›å°‘ä¼ºæœå™¨è² è¼‰

---

## ğŸ”„ å¯¦éš›æµé‡ç¯„ä¾‹

### ç¯„ä¾‹ 1: API è«‹æ±‚

```
å®¢æˆ¶ç«¯è«‹æ±‚:
  â†’ http://localhost/api/v1/agents

Nginx è™•ç†:
  1. æ¥æ”¶è«‹æ±‚
  2. æ·»åŠ å®‰å…¨æ¨™é ­
  3. è¨˜éŒ„è¨ªå•æ—¥èªŒ
  4. è½‰ç™¼åˆ° axiom-be:3001/api/v1/agents
  5. æ¥æ”¶å›æ‡‰
  6. Gzip å£“ç¸®
  7. è¿”å›çµ¦å®¢æˆ¶ç«¯
```

### ç¯„ä¾‹ 2: Grafana è¨ªå•

```
å®¢æˆ¶ç«¯è«‹æ±‚:
  â†’ http://localhost/grafana/d/dashboard

Nginx è™•ç†:
  1. æ¥æ”¶è«‹æ±‚
  2. URL é‡å¯«: /grafana/d/dashboard â†’ /d/dashboard
  3. è½‰ç™¼åˆ° grafana:3000/d/dashboard
  4. è¿”å›å„€è¡¨æ¿é é¢
```

### ç¯„ä¾‹ 3: WebSocket é€£æ¥

```
å®¢æˆ¶ç«¯:
  â†’ ws://localhost/ws

Nginx è™•ç†:
  1. æª¢æ¸¬ Upgrade æ¨™é ­
  2. å»ºç«‹ WebSocket é€£æ¥åˆ° axiom-be
  3. ç¶­æŒé•·é€£æ¥ï¼ˆæœ€é•· 7 å¤©ï¼‰
  4. é›™å‘æ•¸æ“šè½‰ç™¼
```

---

## ğŸ“Š Nginx èˆ‡å…¶ä»–æœå‹™çš„é—œä¿‚

### å‰ç«¯æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ç€è¦½å™¨/å®¢æˆ¶ç«¯                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTP/HTTPS
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚      Nginx        â”‚ â—„â”€â”€â”€ ä½ åœ¨é€™è£¡
          â”‚   (Port 80/443)   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚Axiom-BEâ”‚    â”‚ Grafana â”‚    â”‚Prometheusâ”‚
â”‚:3001   â”‚    â”‚:3000    â”‚    â”‚:9090     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½œç‚ºä¸­é–“å±¤

- **å‰ç«¯**: ç€è¦½å™¨åªéœ€è¨ªå•ä¸€å€‹åœ°å€ï¼ˆPort 80ï¼‰
- **å¾Œç«¯**: å„æœå‹™åœ¨å…§éƒ¨ç¶²è·¯é€šè¨Šï¼Œä¸æš´éœ²
- **Nginx**: æ©‹æ¥å‰å¾Œç«¯ï¼Œæä¾›çµ±ä¸€ä»‹é¢

---

## ğŸ¯ ç‚ºä»€éº¼éœ€è¦ Nginxï¼Ÿ

### å„ªé»

#### 1. **ç°¡åŒ–è¨ªå•**
```bash
# ä¸ä½¿ç”¨ Nginxï¼ˆéœ€è¦è¨˜ä½å¤šå€‹ç«¯å£ï¼‰
http://localhost:3001/api/...      # axiom-be
http://localhost:3000/...          # grafana  
http://localhost:9090/...          # prometheus
http://localhost:8000/...          # cyber-ai-quantum

# ä½¿ç”¨ Nginxï¼ˆçµ±ä¸€å…¥å£ï¼‰
http://localhost/api/...           # â†’ axiom-be
http://localhost/grafana/...       # â†’ grafana
http://localhost/prometheus/...    # â†’ prometheus
```

#### 2. **å®‰å…¨æ€§**
- âœ… å…§éƒ¨æœå‹™ä¸ç›´æ¥æš´éœ²
- âœ… çµ±ä¸€çš„å®‰å…¨æ¨™é ­
- âœ… é›†ä¸­çš„è¨ªå•æ§åˆ¶
- âœ… é˜²æ­¢ç›´æ¥æ”»æ“Šå¾Œç«¯

#### 3. **å¯ç¶­è­·æ€§**
- âœ… å–®é»é…ç½®ç®¡ç†
- âœ… å®¹æ˜“æ·»åŠ /ç§»é™¤æœå‹™
- âœ… çµ±ä¸€çš„æ—¥èªŒæ ¼å¼
- âœ… ç‰ˆæœ¬å‡ç´šä¸å½±éŸ¿å‰ç«¯

#### 4. **æ•ˆèƒ½**
- âœ… Gzip å£“ç¸®
- âœ… é€£æ¥æ± 
- âœ… éœæ…‹æª”æ¡ˆå¿«å–
- âœ… HTTP/2 æ”¯æ´ï¼ˆå¯é¸ï¼‰

#### 5. **å¯æ“´å±•æ€§**
- âœ… å®¹æ˜“æ·»åŠ è² è¼‰å‡è¡¡
- âœ… æ”¯æ´ SSL/TLS çµ‚æ­¢
- âœ… å¯æ•´åˆ WAF
- âœ… æ”¯æ´ CDN

---

## ğŸ”§ ç•¶å‰é…ç½®ç¸½çµ

### ç›£è½

```
Port 80   (HTTP)  - IPv4 + IPv6 âœ…
Port 443  (HTTPS) - é ç•™ï¼ˆéœ€é…ç½® SSLï¼‰
```

### è½‰ç™¼çš„æœå‹™ (5 å€‹)

| æœå‹™ | å…§éƒ¨åœ°å€ | å¤–éƒ¨è·¯å¾‘ |
|------|---------|---------|
| Axiom BE | axiom-be:3001 | /api/, /ws |
| Grafana | grafana:3000 | /grafana/ |
| Prometheus | prometheus:9090 | /prometheus/ |
| Loki | loki:3100 | /loki/ |
| AlertManager | alertmanager:9093 | /alertmanager/ |

### ç‰¹æ®Šç«¯é» (2 å€‹)

| ç«¯é» | åŠŸèƒ½ | è¨ªå• |
|------|------|------|
| /health | å¥åº·æª¢æŸ¥ | å…¬é–‹ |
| / | éœæ…‹ UI | å…¬é–‹ |

---

## ğŸ“ˆ æ•ˆèƒ½æŒ‡æ¨™

### ç•¶å‰é…ç½®

```nginx
worker_processes  auto;         # CPU æ ¸å¿ƒæ•¸
worker_connections  1024;       # æ¯å€‹ worker å¯è™•ç† 1024 é€£æ¥
keepalive 32;                   # æ¯å€‹ä¸Šæ¸¸ 32 å€‹æŒä¹…é€£æ¥
```

### ç†è«–å®¹é‡

- **ä¸¦ç™¼é€£æ¥**: ~1024 Ã— CPUæ ¸å¿ƒæ•¸
- **æ¯ç§’è«‹æ±‚**: ~5,000 - 10,000 RPSï¼ˆå–æ±ºæ–¼å¾Œç«¯ï¼‰
- **å¸¶å¯¬ç¯€çœ**: 60-80%ï¼ˆGzipï¼‰

---

## ğŸ› ï¸ å¯æ“´å±•åŠŸèƒ½ï¼ˆæœªä¾†ï¼‰

### 1. SSL/TLS çµ‚æ­¢

```nginx
server {
    listen 443 ssl http2;
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;
    
    # SSL å„ªåŒ–
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
}
```

### 2. é€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰

```nginx
limit_req_zone $binary_remote_addr zone=api:10m rate=100r/s;

location /api/ {
    limit_req zone=api burst=20;
    proxy_pass http://axiom_ui;
}
```

### 3. IP ç™½åå–®

```nginx
location /admin/ {
    allow 192.168.1.0/24;
    deny all;
    proxy_pass http://axiom_ui;
}
```

### 4. WAF æ•´åˆ

```nginx
# æ•´åˆ ModSecurity
load_module modules/ngx_http_modsecurity_module.so;
modsecurity on;
modsecurity_rules_file /etc/nginx/modsecurity.conf;
```

---

## ğŸ“Š åœ¨ Pandora ç³»çµ±ä¸­çš„é‡è¦æ€§

| æ–¹é¢ | é‡è¦æ€§ | èªªæ˜ |
|------|--------|------|
| **çµ±ä¸€å…¥å£** | ğŸ”´ é—œéµ | æ‰€æœ‰å¤–éƒ¨è¨ªå•çš„å¿…ç¶“ä¹‹è·¯ |
| **å®‰å…¨é˜²è­·** | ğŸ”´ é—œéµ | ç¬¬ä¸€é“é˜²ç·š |
| **è·¯ç”±ç®¡ç†** | ğŸŸ¡ é‡è¦ | ç°¡åŒ–å‰ç«¯é–‹ç™¼ |
| **æ•ˆèƒ½å„ªåŒ–** | ğŸŸ¡ é‡è¦ | æå‡ç”¨æˆ¶é«”é©— |
| **å¯è§€æ¸¬æ€§** | ğŸŸ¢ è¼”åŠ© | çµ±ä¸€æ—¥èªŒæ”¶é›† |

---

## âœ… ç¸½çµ

### Nginx åœ¨ Pandora Box Console çš„è§’è‰²

**ä¸»è¦è§’è‰²**:
1. ğŸ¯ **API Gateway** - çµ±ä¸€å…¥å£é»
2. ğŸ”€ **åå‘ä»£ç†** - è·¯ç”±åˆ†ç™¼
3. ğŸ›¡ï¸ **å®‰å…¨é–˜é“** - ç¬¬ä¸€é“é˜²ç·š
4. âš¡ **æ•ˆèƒ½å„ªåŒ–** - å£“ç¸®ã€å¿«å–ã€é€£æ¥æ± 
5. ğŸ“Š **å¯è§€æ¸¬æ€§** - çµ±ä¸€æ—¥èªŒ

### å…·å‚™çš„åŠŸèƒ½

- âœ… HTTP/HTTPS åå‘ä»£ç†
- âœ… WebSocket é•·é€£æ¥æ”¯æ´
- âœ… éœæ…‹æª”æ¡ˆæœå‹™
- âœ… Gzip å£“ç¸®
- âœ… å®‰å…¨æ¨™é ­æ³¨å…¥
- âœ… é€£æ¥æ± ç®¡ç†
- âœ… è¶…æ™‚æ§åˆ¶
- âœ… å¥åº·æª¢æŸ¥
- âœ… éŒ¯èª¤è™•ç†
- âœ… è¨ªå•æ—¥èªŒ

### å°ç³»çµ±çš„åƒ¹å€¼

**æ²’æœ‰ Nginx**:
- âŒ æ¯å€‹æœå‹™éœ€è¦å–®ç¨è¨ªå•
- âŒ å…§éƒ¨æœå‹™ç›´æ¥æš´éœ²
- âŒ ç„¡çµ±ä¸€çš„å®‰å…¨ç­–ç•¥
- âŒ å‰ç«¯éœ€è¦è™•ç†å¤šå€‹ API ç«¯é»

**æœ‰äº† Nginx**:
- âœ… å–®ä¸€å…¥å£ï¼Œç°¡åŒ–è¨ªå•
- âœ… å…§éƒ¨æœå‹™å—ä¿è­·
- âœ… çµ±ä¸€å®‰å…¨é˜²è­·
- âœ… å‰ç«¯åªéœ€ä¸€å€‹åœ°å€

---

**ç¸½çµ**: Nginx æ˜¯ Pandora Box Console çš„**çµ±ä¸€å…¥å£é–˜é“**ï¼Œæ‰®æ¼”**API Gateway + åå‘ä»£ç† + å®‰å…¨é˜²è­·**çš„ä¸‰é‡è§’è‰²ï¼Œå°ç³»çµ±çš„å¯ç”¨æ€§ã€å®‰å…¨æ€§å’Œå¯ç¶­è­·æ€§è‡³é—œé‡è¦ã€‚

---

**ç‰ˆæœ¬**: v3.4.1  
**ç‹€æ…‹**: âœ… Healthy  
**é…ç½®**: `configs/nginx/default-paas.conf`


