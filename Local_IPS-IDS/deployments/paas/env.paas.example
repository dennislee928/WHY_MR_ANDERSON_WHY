# Pandora Box Console IDS-IPS - PaaS 多平台部署環境變數
# =============================================================================
# 此檔案包含所有 PaaS 平台的環境變數設定
# 複製此檔案為 .env.paas 並填入實際值
# =============================================================================

# =============================================================================
# Railway.app - PostgreSQL 資料庫
# =============================================================================
# Railway 會自動提供以下變數，無需手動設定
# DATABASE_URL=postgresql://user:password@host:port/database
# PGHOST=your-postgresql-host.railway.app
# PGPORT=5432
# PGUSER=postgres
# PGPASSWORD=your-password
# PGDATABASE=pandora

# 手動設定（用於其他服務）
RAILWAY_DATABASE_URL=postgresql://postgres:your-password@containers-us-west-xxx.railway.app:5432/pandora
POSTGRES_HOST=containers-us-west-xxx.railway.app
POSTGRES_PORT=5432
POSTGRES_DB=pandora
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-railway-postgres-password

# =============================================================================
# Render - Redis 快取
# =============================================================================
# Render 會自動提供 REDIS_URL
RENDER_REDIS_URL=redis://default:your-password@red-xxx.render.com:6379
REDIS_HOST=red-xxx.render.com
REDIS_PORT=6379
REDIS_PASSWORD=your-render-redis-password

# Nginx 反向代理 URL
RENDER_NGINX_URL=https://pandora-nginx.onrender.com

# =============================================================================
# Koyeb - Pandora Agent 核心後端
# =============================================================================
KOYEB_AGENT_URL=https://pandora-agent-xxx.koyeb.app
KOYEB_API_TOKEN=your-koyeb-api-token
AGENT_API_URL=https://pandora-agent-xxx.koyeb.app

# =============================================================================
# Patr.io - Axiom UI 前端伺服器
# =============================================================================
PATR_UI_URL=https://axiom-ui-xxx.patr.cloud
PATR_API_TOKEN=your-patr-api-token
UI_API_URL=https://axiom-ui-xxx.patr.cloud

# =============================================================================
# Fly.io - 監控系統 (Prometheus, Loki, Grafana, AlertManager)
# =============================================================================
FLY_APP_NAME=pandora-monitoring
FLY_API_TOKEN=your-fly-api-token
FLY_MONITORING_URL=https://pandora-monitoring.fly.dev

# 各服務 URL
PROMETHEUS_URL=https://pandora-monitoring.fly.dev/prometheus
LOKI_URL=https://pandora-monitoring.fly.dev/loki
GRAFANA_URL=https://pandora-monitoring.fly.dev
ALERTMANAGER_URL=https://pandora-monitoring.fly.dev/alertmanager

# Grafana 設定
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=pandora123
GRAFANA_API_KEY=your-grafana-api-key

# =============================================================================
# 應用程式通用配置
# =============================================================================
# 環境
NODE_ENV=production
GIN_MODE=release
LOG_LEVEL=info
LOG_FORMAT=json

# 安全配置
ENCRYPTION_KEY=your-32-character-encryption-key-here
JWT_SECRET=your-jwt-secret-key-minimum-32-chars
JWT_EXPIRY=24h

# 預設 PSK
DEFAULT_PSK=pandora-secure-pre-shared-key

# CORS 設定
CORS_ALLOWED_ORIGINS=https://pandora-nginx.onrender.com,https://axiom-ui-xxx.patr.cloud

# =============================================================================
# 服務間通訊 URL
# =============================================================================
# 完整的服務 URL 映射
DATABASE_URL=${RAILWAY_DATABASE_URL}
REDIS_URL=${RENDER_REDIS_URL}
AGENT_URL=${KOYEB_AGENT_URL}
UI_URL=${PATR_UI_URL}
NGINX_URL=${RENDER_NGINX_URL}

# =============================================================================
# 監控與告警配置
# =============================================================================
# Prometheus 設定
PROMETHEUS_RETENTION=30d
PROMETHEUS_SCRAPE_INTERVAL=15s

# Loki 設定
LOKI_RETENTION_PERIOD=30d
LOKI_MAX_CHUNK_AGE=1h

# AlertManager 設定
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-email-app-password
EMAIL_FROM=pandora-alerts@yourdomain.com
EMAIL_TO=admin@yourdomain.com

# =============================================================================
# 部署配置
# =============================================================================
# GitHub Actions
GITHUB_TOKEN=your-github-personal-access-token

# 版本標籤
VERSION=1.0.0
BUILD_NUMBER=${GITHUB_RUN_NUMBER:-local}
GIT_COMMIT=${GITHUB_SHA:-local}

# =============================================================================
# 健康檢查端點
# =============================================================================
HEALTH_CHECK_AGENT=${AGENT_URL}/health
HEALTH_CHECK_UI=${UI_URL}/api/v1/status
HEALTH_CHECK_PROMETHEUS=${PROMETHEUS_URL}/-/healthy
HEALTH_CHECK_LOKI=${LOKI_URL}/ready
HEALTH_CHECK_GRAFANA=${GRAFANA_URL}/api/health
HEALTH_CHECK_ALERTMANAGER=${ALERTMANAGER_URL}/-/healthy

# =============================================================================
# 可選功能開關
# =============================================================================
ENABLE_MTLS=false
ENABLE_RATE_LIMITING=true
ENABLE_IP_FILTERING=true
ENABLE_AUTO_REMEDIATION=true
ENABLE_THREAT_INTELLIGENCE=true
ENABLE_GEO_LOCATION=true

# =============================================================================
# 效能調校
# =============================================================================
MAX_CONNECTIONS=100
CONNECTION_TIMEOUT=30s
REQUEST_TIMEOUT=60s
WORKER_POOL_SIZE=10
BUFFER_SIZE=1000

# =============================================================================
# 時區設定
# =============================================================================
TZ=Asia/Taipei

# =============================================================================
# 部署平台 CLI 命令參考
# =============================================================================
# Railway:   railway login && railway link
# Render:    render login
# Koyeb:     koyeb login
# Patr.io:   patr login
# Fly.io:    fly auth login

# =============================================================================
# 注意事項
# =============================================================================
# 1. 請勿將此檔案提交到版本控制系統
# 2. 使用強密碼和隨機生成的密鑰
# 3. 定期輪換密鑰和密碼
# 4. 確保所有服務間的 URL 正確無誤
# 5. 在各平台的 Dashboard 中設定對應的環境變數

