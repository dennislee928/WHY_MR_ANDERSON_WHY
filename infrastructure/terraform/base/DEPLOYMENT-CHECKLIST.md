# Terraform éƒ¨ç½²æª¢æŸ¥æ¸…å–®

## ğŸ¯ éƒ¨ç½²å‰æª¢æŸ¥

### âœ… API Tokens æº–å‚™

- [ ] Railway API Token å’Œ Project ID
- [ ] Render API Key
- [ ] Koyeb API Token å’Œ Organization ID
- [ ] Patr.io API Token
- [ ] Fly.io API Token
- [ ] Grafana Admin Password è¨­å®š
- [ ] PostgreSQL Password è¨­å®š

### âœ… Docker Images æº–å‚™

- [ ] `pandora-agent` æ˜ åƒå·²å»ºç½®ä¸¦æ¨é€
- [ ] `axiom-ui` æ˜ åƒå·²å»ºç½®ä¸¦æ¨é€
- [ ] `monitoring` æ˜ åƒå·²å»ºç½®ä¸¦æ¨é€åˆ° Fly.io registry
- [ ] `nginx` Dockerfile å­˜åœ¨ä¸”æ­£ç¢º

### âœ… é…ç½®æª”æ¡ˆæª¢æŸ¥

- [ ] `terraform.tfvars` å·²å»ºç«‹ï¼ˆå¾ `.example` è¤‡è£½ï¼‰
- [ ] æ‰€æœ‰æ•æ„Ÿè³‡è¨Šå·²å¡«å…¥
- [ ] ç’°å¢ƒè®Šæ•¸å·²è¨­å®šï¼ˆdev/staging/prodï¼‰
- [ ] Git repository URL æ­£ç¢º
- [ ] Branch åç¨±æ­£ç¢º

### âœ… å‰ç½®ä½œæ¥­

- [ ] Terraform å·²å®‰è£ï¼ˆ>= 1.0ï¼‰
- [ ] Git å·²é…ç½®
- [ ] Docker å·²å®‰è£ï¼ˆç”¨æ–¼æœ¬åœ°æ¸¬è©¦ï¼‰
- [ ] ç¶²è·¯é€£ç·šç©©å®š

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–

```bash
cd terraform
terraform init
```

**æª¢æŸ¥**:
- [ ] Providers ä¸‹è¼‰æˆåŠŸ
- [ ] æ²’æœ‰éŒ¯èª¤è¨Šæ¯
- [ ] `.terraform` ç›®éŒ„å·²å»ºç«‹

### ç¬¬äºŒæ­¥ï¼šé©—è­‰

```bash
terraform validate
terraform fmt -check
```

**æª¢æŸ¥**:
- [ ] é…ç½®æœ‰æ•ˆ
- [ ] æ ¼å¼æ­£ç¢º

### ç¬¬ä¸‰æ­¥ï¼šè¨ˆåŠƒ

```bash
terraform plan -out=tfplan
```

**æª¢æŸ¥**:
- [ ] è¨ˆåŠƒè¼¸å‡ºæ¸…æ¥š
- [ ] è¦å»ºç«‹çš„è³‡æºæ­£ç¢º
- [ ] æ²’æœ‰æ„å¤–çš„éŠ·æ¯€æ“ä½œ
- [ ] æ‰€æœ‰æ¨¡çµ„éƒ½è¢«å¼•ç”¨

### ç¬¬å››æ­¥ï¼šæ‡‰ç”¨

```bash
terraform apply tfplan
```

**æª¢æŸ¥**:
- [ ] æ‡‰ç”¨æˆåŠŸ
- [ ] æ‰€æœ‰è³‡æºéƒ½å·²å»ºç«‹
- [ ] æ²’æœ‰éŒ¯èª¤è¨Šæ¯

### ç¬¬äº”æ­¥ï¼šé©—è­‰

```bash
terraform output
```

**æª¢æŸ¥**:
- [ ] æ‰€æœ‰ URL éƒ½æœ‰æ•ˆ
- [ ] æœå‹™éƒ½å¯è¨ªå•
- [ ] å¥åº·æª¢æŸ¥é€šé

## ğŸ” éƒ¨ç½²å¾Œé©—è­‰

### Fly.io ç›£æ§ç³»çµ±

```bash
# æª¢æŸ¥æ‡‰ç”¨ç‹€æ…‹
fly status --app $(terraform output -raw fly_app_name)

# æŸ¥çœ‹æ—¥èªŒ
fly logs --app $(terraform output -raw fly_app_name)

# æ¸¬è©¦æœå‹™
curl $(terraform output -raw grafana_url)/api/health
curl $(terraform output -raw prometheus_url)/-/healthy
curl $(terraform output -raw loki_url)/ready
```

**æª¢æŸ¥**:
- [ ] Grafana å¯è¨ªå•
- [ ] Prometheus å¥åº·
- [ ] Loki å¥åº·
- [ ] AlertManager å¥åº·
- [ ] Volume å·²æ›è¼‰

### Railway PostgreSQL

```bash
# ä½¿ç”¨ psql é€£ç·šæ¸¬è©¦
psql $(terraform output -raw database_url)
```

**æª¢æŸ¥**:
- [ ] è³‡æ–™åº«å¯é€£ç·š
- [ ] è³‡æ–™åº«å·²å»ºç«‹
- [ ] ä½¿ç”¨è€…æ¬Šé™æ­£ç¢º

### Render Services

**æª¢æŸ¥**:
- [ ] Redis é‹è¡Œä¸­
- [ ] Nginx é‹è¡Œä¸­
- [ ] å¥åº·æª¢æŸ¥é€šé

### Koyeb Agent

**æª¢æŸ¥**:
- [ ] æœå‹™é‹è¡Œä¸­
- [ ] æ—¥èªŒæ­£å¸¸
- [ ] API ç«¯é»å¯è¨ªå•

### Patr.io UI

**æª¢æŸ¥**:
- [ ] UI å¯è¨ªå•
- [ ] å¯ä»¥ç™»å…¥
- [ ] å¯ä»¥é€£æ¥åˆ°å¾Œç«¯ API

## ğŸ“Š ç›£æ§è¨­å®š

### Grafana

1. [ ] ç™»å…¥ Grafana (admin / your-password)
2. [ ] é©—è­‰ Datasources
   - [ ] Prometheus connected
   - [ ] Loki connected
3. [ ] æª¢æŸ¥ Dashboards
4. [ ] è¨­å®šå‘Šè­¦è¦å‰‡

### Prometheus

1. [ ] è¨ªå• Prometheus UI
2. [ ] æª¢æŸ¥ Targets
   - [ ] æ‰€æœ‰ targets éƒ½æ˜¯ UP
3. [ ] åŸ·è¡Œæ¸¬è©¦æŸ¥è©¢
4. [ ] é©—è­‰è³‡æ–™æ”¶é›†

### Loki

1. [ ] è¨ªå• Loki API
2. [ ] æŸ¥è©¢æ¸¬è©¦æ—¥èªŒ
3. [ ] é©—è­‰æ—¥èªŒæ”¶é›†

## ğŸ” å®‰å…¨æª¢æŸ¥

- [ ] æ‰€æœ‰å¯†ç¢¼éƒ½æ˜¯å¼·å¯†ç¢¼
- [ ] API tokens å·²å®‰å…¨å„²å­˜
- [ ] `terraform.tfvars` ä¸åœ¨ Git ä¸­
- [ ] GitHub Secrets å·²è¨­å®š
- [ ] Fly.io secrets å·²è¨­å®š
- [ ] æ²’æœ‰ç¡¬ç·¨ç¢¼çš„æ•æ„Ÿè³‡è¨Š
- [ ] HTTPS å·²å•Ÿç”¨
- [ ] é˜²ç«ç‰†è¦å‰‡å·²è¨­å®šï¼ˆå¦‚é©ç”¨ï¼‰

## ğŸ§ª æ¸¬è©¦æ¸…å–®

### åŠŸèƒ½æ¸¬è©¦

- [ ] ç”¨æˆ¶å¯ä»¥ç™»å…¥ UI
- [ ] Agent å¯ä»¥é€£æ¥åˆ°è³‡æ–™åº«
- [ ] Agent å¯ä»¥é€£æ¥åˆ° Redis
- [ ] æ—¥èªŒè¢«æ­£ç¢ºæ”¶é›†
- [ ] æŒ‡æ¨™è¢«æ­£ç¢ºæ”¶é›†
- [ ] å‘Šè­¦å¯ä»¥æ­£å¸¸ç™¼é€
- [ ] Nginx åå‘ä»£ç†æ­£å¸¸å·¥ä½œ

### æ•ˆèƒ½æ¸¬è©¦

- [ ] é é¢è¼‰å…¥æ™‚é–“ < 3ç§’
- [ ] API å›æ‡‰æ™‚é–“ < 500ms
- [ ] è³‡æ–™åº«æŸ¥è©¢æ•ˆèƒ½æ­£å¸¸
- [ ] æ²’æœ‰è¨˜æ†¶é«”æ´©æ¼

### æ•´åˆæ¸¬è©¦

- [ ] æ‰€æœ‰æœå‹™å¯ä»¥äº’ç›¸é€šè¨Š
- [ ] è³‡æ–™æµæ­£å¸¸
- [ ] ç›£æ§å‘Šè­¦æ­£å¸¸
- [ ] æ—¥èªŒèšåˆæ­£å¸¸

## ğŸ“ æ–‡ä»¶æª¢æŸ¥

- [ ] æ‰€æœ‰é…ç½®éƒ½å·²è¨˜éŒ„
- [ ] API endpoints å·²è¨˜éŒ„
- [ ] æ•…éšœæ’é™¤æ­¥é©Ÿå·²è¨˜éŒ„
- [ ] è®Šæ›´æ—¥èªŒå·²æ›´æ–°
- [ ] README å·²æ›´æ–°

## ğŸ”„ å›æ»¾è¨ˆåŠƒ

å¦‚æœéƒ¨ç½²å¤±æ•—ï¼š

1. [ ] ä¿å­˜éŒ¯èª¤æ—¥èªŒ
2. [ ] åŸ·è¡Œ `terraform destroy` ï¼ˆå¦‚éœ€è¦ï¼‰
3. [ ] æª¢æŸ¥ state æª”æ¡ˆ
4. [ ] æ¢å¾©åˆ°ä¸Šä¸€å€‹å·²çŸ¥è‰¯å¥½ç‹€æ…‹
5. [ ] åˆ†æå¤±æ•—åŸå› 
6. [ ] ä¿®å¾©å•é¡Œ
7. [ ] é‡æ–°éƒ¨ç½²

## âœ… å®Œæˆ

- [ ] æ‰€æœ‰æª¢æŸ¥é …ç›®éƒ½å·²å®Œæˆ
- [ ] ç³»çµ±é‹è¡Œç©©å®š
- [ ] ç›£æ§æ­£å¸¸é‹ä½œ
- [ ] åœ˜éšŠå·²é€šçŸ¥
- [ ] æ–‡ä»¶å·²æ›´æ–°
- [ ] éƒ¨ç½²è¨˜éŒ„å·²å„²å­˜

---

**éƒ¨ç½²æ—¥æœŸ**: _______________  
**éƒ¨ç½²è€…**: _______________  
**ç’°å¢ƒ**: _______________  
**ç‰ˆæœ¬**: _______________  
**ç‹€æ…‹**: _______________

